import java.util.ArrayList;
import java.util.Scanner;

/**
 * Basic console functionality of the Greeter classes, handling console io and
 * method calls
 * 
 * @author Tim Fierek
 *
 */
public class GreeterApp {

	private static Scanner scnr;

	public static void main(String[] args) {
		scnr = new Scanner(System.in);
		String greeting = getGreeting();
		String name = getName();
		int volume = getVolume();
		String htmlTag = getHtmlTag();
		ArrayList<Greeter> greetings = new ArrayList<>();
		greetings.add(0, new Greeter(greeting));
		greetings.add(1, new SimonGreeter(greeting));
		greetings.add(2, new LoudGreeter(greeting));
		greetings.add(3, new HtmlGreeter(greeting, htmlTag));
		scnr.close();

		// Add loudness to LoudGreeting based on user input
		for (int i = 0; i < volume; i++) {
			((LoudGreeter) greetings.get(2)).addVolume();
		}
		
		for(Greeter greetingObj : greetings) {
			System.out.println(greetingObj);
		}

		

	}

	private static String getHtmlTag() {
		String htmlTag = "";
		// Collect html tag
		while (htmlTag.equals("")) {
			System.out.print("What would you like the html tag to be? ");

			try {
				htmlTag = scnr.nextLine();
			} catch (Exception e) {
				System.out.println("Invalid input encountered...");
			}
		}
		return htmlTag;
	}

	private static int getVolume() {
		int volume = -1;
		// Collect volume
		while (volume < 0) {
			System.out.print("How much volume to add? (0 to 10): ");

			try {
				volume = scnr.nextInt();
			} catch (Exception e) {
				System.out.println("Invalid input encountered...");
			}
		}
		return volume;
	}

	private static String getName() {
		String name = "";
		// Collect user's name
		while (name.equals("")) {
			System.out.print("Enter your name: ");

			try {
				name = scnr.nextLine();
			} catch (Exception e) {
				System.out.println("Invalid input encountered...");
			}
		}
		return name;
	}

	private static String getGreeting() {
		String greeting = "";
		while (greeting.equals("")) {
			System.out.print("Choose a greeting: ");

			try {
				greeting = scnr.nextLine();
			} catch (Exception e) {
				System.out.println("Invalid input encountered...");
			}
		}
		return greeting;
	}

}
